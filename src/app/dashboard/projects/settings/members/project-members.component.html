<div dir="auto" class="ps-container">
  <div class="box columns is-mobile ps-section-you-container">
    <div class="column is-2">
      <img class="ps-project-member-image" *ngIf="user.profileImage"
           src="{{user.profileImage? config.imagesEndpoint + '/profile/' + user.profileImage :
                  '../../../../../assets/images/placeholder.jpg'}}">
      <svg *ngIf="!user.profileImage" class="ps-project-member-image" width="36" height="36" [identiconHash]="userEmailHash(user.email)">
        Fallback text for browsers not supporting inline svg
      </svg>
    </div>
    <div class="column is-10">
      <div class="ps-user-email">
        <i>{{user.email}}</i>
      </div>
      <div class="ps-user-role">
        {{getUserRole()}}
      </div>
    </div>
  </div>

  <ng-container *ngIf="!readOnly">
    <div *ngFor='let member of members;trackBy:let i = index'
         class="columns is-gapless is-mobile ps-margin-bottom ps-team-members-item-container">
      <div class="column is-2">
        <img class="ps-project-member-image" *ngIf="member.profileImage"
             src="{{member.profileImage? config.imagesEndpoint + '/profile/' + member.profileImage :
                  '../../../../../assets/images/placeholder.jpg'}}">
        <svg *ngIf="!member.profileImage" class="ps-project-member-image" width="36" height="36" [identiconHash]="userEmailHash(member.email)">
          Fallback text for browsers not supporting inline svg
        </svg>
      </div>
      <div class="column is-8 ps-padding-top">
        <div class="has-text-left ps-user-email">
          {{member.email}}
        </div>
        <div *ngIf="member.role !== 'owner'" class="ps-user-role">
          <swing-select
            [width]="'120px'"
            [items]="['team member','admin']"
            [label]="member.role"
            (onItemClicked)="changeTeamMemberRole(member.id, i, $event)">
          </swing-select>
          <a class="button ps-member-item-remove-team-member" *ngIf="teamMemberRoleChanged"
             [ngClass]="{'is-loading': teamMemberRoleChanged}"></a>
        </div>
        <div *ngIf="member.role === 'owner'" class="ps-user-role ps-owner-role">
          {{member.role}}
        </div>
      </div>
      <div class="column is-2">
        <div class="ps-member-item-button" *ngIf="removeMemberConfirmationViewIndex !== i">
          <a class="button ps-member-item-button-confirmation"
             (click)="confirmRemoveMember(i)">
            <span class="icon">
              <i class="icon-trash has-text-danger"></i>
            </span>
          </a>
        </div>
        <div class="ps-member-item-button" *ngIf="removeMemberConfirmationViewIndex === i" [@slideInOut]>
          <a class="button ps-member-item-button-confirmation" *ngIf="!removeButtonDisabled"
             (click)="cancelRemoveConfirmation()">
            <span class="icon">
              <i class="icon-cancel" [ngClass]="{'has-text-danger': !removeButtonDisabled}"></i>
            </span>
          </a>
          <a class="button ps-member-item-button-confirmation" [ngClass]="{'is-loading': removeButtonDisabled}"
             (click)="removeMember(member.id, i)">
            <span class="icon">
              <i class="icon-check" [ngClass]="{'has-text-success': !removeButtonDisabled}"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="readOnly">
    <div *ngFor='let member of members;trackBy:let i = index' class="columns is-gapless  is-mobile ps-margin-bottom ps-team-members-item-container">
      <div class="column is-2">
        <img class="ps-project-member-image" *ngIf="member.profileImage"
             src="{{member.profileImage? config.imagesEndpoint + '/profile/' + member.profileImage :
                  '../../../../../assets/images/placeholder.jpg'}}">
        <svg *ngIf="!member.profileImage" class="ps-project-member-image" width="36" height="36" [identiconHash]="userEmailHash(member.email)">
          Fallback text for browsers not supporting inline svg
        </svg>
      </div>
      <div class="column is-10">
        <div class="ps-user-email">
          <i>{{member.email}}</i>
        </div>
        <div class="ps-user-role">
          {{member.role}}
        </div>
      </div>
    </div>
  </ng-container>
</div>
